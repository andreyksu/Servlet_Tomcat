# Цель данног проекта НЕ является сам ЧАТ, а целью является - попробовать технологии (servlet, JNDI, Mail итд)

## JAVA:
1. Сделать отправку сообщений c приложениями по smtp
	- Сохранение и разбор есть - нужно поиграться с отправкой.
2. Привести код в порядок - сейчас по коду совсем печаль (так как делалось из разрада - попробовать. Много где так и осталось - на уровен кода "попробовать").
	1. Разложить по методам (уменьшить сократить в объеме текущие методы).
	2. Продумать над применением шаблонов ООП - возможно нужно переделать на нормальные паттерны.
	3. Перейти на собственные исключения (продумать их генерацию и их обработку).
	4. Продумать работу с конкуретностью (нет ли конкурентного ресурса) итд.
	5. Подумать над логгированием (т.е. сейчас оооочень много уровня debug - нужно перевести частично в info а дебаг уровень перестать логгировать).
3. ? Возможно стоит где-то перейти на WebSocket - опять же, стоит ли? 
	- Возможно стоит попробовать в рамках отдельного мелкого приложения.
4. Сделать и хранить hash а не чистый пароль (возможно стоит два раза на клиенте и на сервере).
		
### По функционалу:
1. Продумать работу с группами/чатами/комнатами
	- Создание группы, редактирование группы(список участников, рассыла итд).
2. Продумать работу с удалением сообщений (от имени пользователя - автора)
	- Здесь тоже вроде проще, передавать uuid для сообщений а потом просто при попытке удалить передавать этот uuid и обрабатывать отдельным servlet-ом.
3. Сделать получение пользователей через поиск а не сразу всех.
	- Два варианта:
		1. Первый:
			- Сделать переключение в виде радио-баттона (два списка "полный" и "список выбранных". Полный, там где можно чекбоксом отметить тех пользователей, что должны появиться в выбранном списке - но это где то нужно хранить, т.е. хранить выбранных для каждого пользователя).
			- Сделать поиск/фильтр пользователя (здесь первая часть - это просто фильтрация на стороне клиента, вторая часть это с запросом на сервер).
		2. Второй:
			- Сделать поиск пользователей - по регулярке. При этом при поиске прекращать отображать текущих пользователей и отображать найденных а далее предлагать отметить тех, что нашли.
4. Сделать админку (бан пользователей и возможно еще что-то).
	- По сути это роутинг - и отдельный класс будет - что будет отвечать за администрирование.
5. [+] При регистрации на сайте - отправлять сообщение на почту, что указана при регистрации с кодом для продолжения авторизации.
	- Здесь вроде все просто - добавить поле в БД для хранения кода.
6. [+] Сделать загрузку только 30  последних сообщений а при скролле вверх - подгружать старые сообщения.
	- Там по БД все понятно, но будет сортировка обратная - нужно учесть в JS
7. [+] Заменить хотя бы временно аватарки для себя и для собеседника.
	- По хорошему аватарки тоже нужно хранить - бинари уже умею передавать и хранить, нужно сделать по аналогии но для аватарок.

### JS
1. Привести код в порядок
	1. Сделать вынести обращение к элементам и тегам в отдельные переменные итд
	2. Пробежаться и просмотреть обработку различных ситуаций.
	3. Вероятно сделать некие модельки-классы.
4. После добавления на стороне сервера комнат/чатов - нужно доработать на стороне клиента.
3. ? Возможно стоит переделать на WebSocket
4. После доработки ответов при неудачных кейсах со стороны сервера - сделать обработку ответов на стороне клиента.

### HTML/CSS
1. Привести стиль страницы в нормальный вид (Bootstrap, Vue.js)
2. ? На странице регистрации сделать блокировку кнопки пока на клиенте не прошли валидацию поля.
3. Аналогично сделать валидацию полей на стороне клиента (оставить на стороне сервера но и добавить на клиент)

# Bug
1. Когда переписка еще свежая, т.е. нет ни одного сообщения и кто-то пишет - то это превое сообщение не отображается. Помогает только переключение между пользователими, после этого приходит.
	- Нужно посмотреть, получение времени по сообщениями(ведь их еще нет) и если мы не нашли то получить по екущее время.
	- Проблема на 2020-05-хх так и осталась.
2. Вторая проблема. Когда первое сообщение отправляется и нажимается Enter сбрасывается выделенный пользователь. Потом такой проблемы нет.

# Общее:
1. Нарисовать диаграммы - по которым будет понятно как и что работает.
	- Плюс расписать по Servlet - инициализация и дестрой.
	- По остальным частям кода тоже подготовить диаграммки.